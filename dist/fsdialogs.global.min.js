
/**  
 * @author Alessandro Batisti <fenisoft@gmail.com>  
 * @version 0.2.2
 * {@link https://github.com/fenisoft/fsdialog GitHub}.
 */
"use strict";var fsdialog=(()=>{var b=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var O=(a,i)=>{for(var u in i)b(a,u,{get:i[u],enumerable:!0})},L=(a,i,u,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of h(i))!v.call(a,t)&&t!==u&&b(a,t,{get:()=>i[t],enumerable:!(e=p(i,t))||e.enumerable});return a};var $=a=>L(b({},"__esModule",{value:!0}),a);var T={};O(T,{fsAlert:()=>m,fsDialog:()=>c,fsPrompt:()=>C,fsSuccess:()=>g});function m(a,i="Alert"){return c([{text:"OK",value:"OK",class:"btn btn-sm btn-danger"}],a,i,{headClass:"bg-danger text-white",closeButton:!0,width:"auto"})}function g(a,i="Success"){return c([{text:"OK",value:"OK",class:"btn btn-sm btn-success"}],a,i,{headClass:"bg-success text-white",closeButton:!0,width:"auto"})}function c(a,i,u,e={}){e==null&&(e={});let t={headClass:"",closeButton:!1,closeOnEsc:!1,buttonsPosition:"right"};e.headClass&&(t.headClass=e.headClass),e.closeButton&&(t.closeButton=e.closeButton),e.container&&(t.container=e.container),e.closeOnEsc&&(t.closeOnEsc=e.closeOnEsc),e.buttonsPosition&&(t.buttonsPosition=e.buttonsPosition);let n="400px";e.width&&(n=e.width);let s=[];if(a.length==0)s=[{value:"OK",text:"OK",class:"btn btn-sm btn-light"}];else for(let l of a){let r={value:"",text:"",class:"btn btn-sm"};l.value?r.value=l.value:r.value="OK",l.text?r.text=l.text:r.text=l.value,l.class?r.class=l.class:r.class="btn btn-sm",s.push(r)}let o=document.createElement("dialog");return o.classList.add("fs-dialog-modal"),n!="auto"?o.style.width=n:o.classList.add("fs-dialog-auto"),e.borderRadius&&(o.style.borderRadius=e.borderRadius),o.innerHTML=M(s,i,u,t),t.container?t.container?.append(o):document.body.append(o),new Promise(l=>{o.showModal(),o.addEventListener("cancel",r=>{e.closeOnEsc?(o.remove(),l("ESC")):r.preventDefault()}),document.querySelectorAll(".fs-close-modal").forEach(r=>{r.addEventListener("click",f=>{let d=f.currentTarget.dataset?.return;o.close(),o.remove(),d!==void 0&&l(d)})})})}function M(a,i,u,e){let t=a.map(l=>`<button data-return="${l.value}"
				class="fs-close-modal ${l.class}" type="button">${l.text}</button>`).join('<span style="margin-left:4px"></span>'),n="fs-dialog-buttons",s=`<div class="fs-dialog-margin-auto"></div>${t}`;e.buttonsPosition&&(e.buttonsPosition=="left"&&(s=t),e.buttonsPosition=="center"&&(n="fs-dialog-buttons fs-dialog-buttons-center",s=t));let o="";return e.closeButton&&(o=`<div class="fs-dialog-margin-auto"></div>
		<div class="fs-close-modal fs-dialog-pointer" role="button" data-return="CLOSE">&#10761;</div>`),`
	<div class="fs-dialog-title ${e.headClass}" >
		<div>${u}</div>
		${o}	    
 	</div>  

	 <div class="fs-dialog-body">
		${i}
 	</div>
 
	<hr class="fs-dialog-hr">
	<div class="${n}">
		${s}
	</div>
	`}function C(a,i,u,e={}){u==null&&(u=""),(e==null||Object.keys(e).length===0)&&(e={inputType:"text",headClass:"",min:"",max:"",step:"",buttonOkInnerHTML:"OK",buttonCloseInnerHTML:"CLOSE",buttonOkClass:"btn btn-primary btn-sm",buttonCloseClass:"btn btn-secondary btn-sm",inputClass:"fs-dialog-input",width:"400px",placeholder:"",invertButtons:!1});let t="400px";e.width&&(t=e.width);let n=`${new Date().getTime()}`,s=document.createElement("dialog");return s.classList.add("fs-dialog-modal"),t!="auto"?s.style.width=t:s.classList.add("fs-dialog-auto"),s.innerHTML=x(a,i,u,n,e),e.container?e.container?.append(s):document.body.append(s),new Promise(o=>{let l=s.querySelector(`#v${n}`);if(s.showModal(),l&&l.type!="number"){let r=l?.value.length;l?.setSelectionRange(r,r),l?.focus()}document.querySelector(`#form_${n}`)?.addEventListener("submit",r=>{r.preventDefault();let d=document.getElementById(`v${n}`).value;s.close(),s.remove(),o({button:"OK",value:d})}),document.querySelector(`#close_${n}`)?.addEventListener("click",r=>{s.close(),s.remove(),o({button:"CLOSE"})}),s.addEventListener("cancel",r=>{o({button:"CLOSE"})})})}function x(a,i,u,e,t){let n={inputType:"text",headClass:"",min:"",max:"",step:"",buttonOkInnerHTML:"OK",buttonCloseInnerHTML:"CLOSE",buttonOkClass:"btn btn-primary btn-sm",buttonCloseClass:"btn btn-secondary btn-sm",inputClass:"fs-dialog-input",width:"400px",placeholder:"",invertButtons:!1};t.buttonOkClass&&(n.buttonOkClass=t.buttonOkClass),t.buttonCloseClass&&(n.buttonCloseClass=t.buttonCloseClass),t.headClass&&(n.headClass=t.headClass),t.placeholder&&(n.placeholder=t.placeholder),t.inputType&&(n.inputType=t.inputType),t.min&&(n.min=t.min),t.max&&(n.max=t.max),t.step&&(n.step=t.step),t.buttonOkInnerHTML&&(n.buttonOkInnerHTML=t.buttonOkInnerHTML),t.buttonCloseInnerHTML&&(n.buttonCloseInnerHTML=t.buttonCloseInnerHTML),t.inputClass&&(n.inputClass=t.inputClass),Object.hasOwn(t,"invertButtons")&&(n.invertButtons=t.invertButtons);let s="";n.inputType=="number"&&(a==""&&(a="0"),n.min&&(s+=` min="${n.min}" `),n.max&&(s+=` max="${n.max}" `),n.step&&(s+=` step="${n.step}" `));let o="";t.placeholder&&(o=` placeholder="${t.placeholder}" `);let l="";i===""&&(l=" hidden ");let r=`<button class="${n.buttonOkClass}" type="submit" >
			${n.buttonOkInnerHTML}
		</button>
		<button data-return="CLOSE" type="button" class="fs-dialog-ml-2 ${n.buttonCloseClass}" id="close_${e}">
			${n.buttonCloseInnerHTML}
		</button>`;return n.invertButtons&&(r=`<button data-return="CLOSE" type="button" class="${n.buttonCloseClass}" id="close_${e}">
			${n.buttonCloseInnerHTML}
		</button>
		<button class="fs-dialog-ml-2 ${n.buttonOkClass}" type="submit" >
			${n.buttonOkInnerHTML}
		</button>`),`
    <div class="fs-dialog-title ${n.headClass}">
	   ${u}
	</div>  
		
	<form id="form_${e}">
		<div class="fs-dialog-body">
			<div class="mb-1">
				<label for="v${e}" ${l} >
					${i}
				</label>
				<input class="${n.inputClass}"  type="${n.inputType}" name="name_${e}" required
							id="v${e}" ${s} ${o}
							value="${a}" maxlength="50" />
			</div>
		</div>
		
		<div class="fs-dialog-buttons">
			<div class="fs-dialog-margin-auto"></div>
			 ${r}
		</div>
	<form>
</div>
	`}return $(T);})();
